<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Loaner Log</title>
		<!-- CSS -->
		<link href="/components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" media="screen">
		<link href="/assets/css/main.css" rel="stylesheet" media="screen">
		<!-- JS -->
		<script src="/components/jquery/dist/jquery.min.js"></script>
		<script src="/components/bootstrap/dist/js/bootstrap.min.js"></script>
		<link rel="icon" href="/favicon.ico" />
		<!-- PickADate -->
		<script src="/components/pickadate/lib/picker.js"></script>
		<script src="/components/pickadate/lib/picker.date.js"></script>
		<script src="/components/pickadate/lib/picker.time.js"></script>
		<link href="/components/pickadate/lib/themes/classic.css" rel="stylesheet" media="screen"></script>
		<link href="/components/pickadate/lib/themes/classic.date.css" rel="stylesheet" media="screen"></script>
		<link href="/components/pickadate/lib/themes/classic.time.css" rel="stylesheet" media="screen"></script>

	</head>
	<body>

		<div class="container">

			<!-- HEADER -->
			<div id="head" class="row">			
				<div class="col-md-8">	
					<h1 class="head-item">Loaner Log <a id="org-linkback" href="#"><small class="text-primary">Intranet</small></a></h1>
				</div>
				<div class="col-md-4">
					<div class="lead head-item user-login pull-right">
						<p>Hello,</p> <a id="logged-in" href="#profile"><span id="user-logged-in" class="text-primary">Justin Maslin</span></a>
						<button type="button" class="btn btn-sm btn-warning">Lock</button>
						<button type="button" class="btn btn-sm btn-info">Logout</button>
					</div>
				</div>
				<div class="col-md-12">
					<div class="hr"><hr></div>	
				</div>	
			</div>
			<!-- HEADER END -->

			<!-- BODY -->
			<div id="content" class="row">
				<!-- SIDEBAR -->
				<div id="side" class="col-md-3">

					<!-- TODO: Give each sidebar module its own box with shadow, pop-up from background. -->

					<div id="loan-category" class="sidebar-module">
						<div class="row">
							<h3 class="text-primary">Loan Actions</h3>
							<hr>
							<button type="button" class="btn btn-info loan-btn" data-toggle="modal" data-target="#loan-out-modal">Check Out</button>
							<button type="button" class="btn btn-success loan-btn" data-toggle="modal" data-target="#loan-in-modal">Check In</button>
						</div>
					</div>

					<div id="loan-inventory" class="sidebar-module">
						<div class="row">
							<h3 class="text-primary">Current Inventory</h3>
							<hr>
						</div>
						<div id="loan-inventory-categories" class="row text-center"> 
						<!-- Each inventory category item gets own col-md-3 span, that way rollover looks good. Dynamically load from ajax request on available asset classes and inventories. IDs of main div (with class col-md-3) will have custom idents loaded. -->
							<div id="loan-type-laptop1" class="inventory-item col-md-4 col-sm-6 text-center">
								<img class="img img-responsive" src="/assets/img/laptop.png">
								<span class="badge">12</span>
							</div>
							<div id="loan-type-mic" class="inventory-item col-md-4 col-sm-6">
								<img class="img img-responsive" src="/assets/img/mic.png">
								<span class="badge">4</span>
							</div>
							<div id="loan-type-remote" class="inventory-item col-md-4 col-sm-6">
								<img class="img img-responsive" src="/assets/img/remote.png">
								<span class="badge">2</span>
							</div>	
							<div id="loan-type-webcam" class="inventory-item col-md-4 col-sm-6">
								<img class="img img-responsive" src="/assets/img/webcam.png">
								<span class="badge">1</span>
							</div>		
							<div id="loan-type-hdmi-adapter" class="inventory-item col-md-4 col-sm-6">
								<img class="img img-responsive" src="/assets/img/hdmi-adapter.png">
								<span class="badge">4</span>
							</div>	
							<div id="loan-type-vga-adapter" class="inventory-item col-md-4 col-sm-6">
								<img class="img img-responsive" src="/assets/img/vga-adapter.png">
								<span class="badge">3</span>
							</div>																												
						</div>
					<!-- Would show how many left / how many total. Example: Laptops (4/5) -->
					</div>


					<div id="loan-admin" class="sidebar-module">
						<div class="row">
							<h3 class="text-primary">Admin Options</h3>
							<hr>
						</div>
						<div class="row">
							<ul id="admin-log-options" class="nav nav-stackable nav-pills">
								<li role="presentation"><a href="#">Manage Assets</a></li>
								<li role="presentation"><a href="#">Manage Users</a></li>
								<li role="presentation"><a href="#"></a></li>
							</ul>
						</div>			
					</div>
<!-- 					<div class="loan-category">
						<h4 title="Adapters, Mice, Speakers">Accessories</h4>
						<button type="button" class="btn btn-primary loan-btn">Check Out</button>
						<button type="button" class="btn btn-info loan-btn">Check In</button>						
					</div> -->
				</div>
				<!-- SIDEBAR END -->

				<!-- MAIN CONTENT -->
				<div id="main" class="col-md-offset-1 col-md-8">
					
					<div class="title">
						<div class="row">
							<h3>Log View</h3>
							<ul id="tableView" class="nav nav-stackable nav-pills">
								<li role="presentation" class="active"><a href="#today">Today</a></li>
								<li role="presentation"><a href="#late">Late Rentals</a></li>
								<li role="presentation"><a href="#long">Long Term</a></li>
							</ul>
						</div>

						<!-- TODO: View options, Click to display them, etc. -->
						<!-- View Options: Today, Certain Date, Overdue, FILTERS (Overview By User Type (Student,Staff), Overview By Item Type (Laptop, Adapter)) -->
<!-- 						<ul id="tableViewOptions" class="nav nav-stackable nav-pills">
							<li role="presentation" class="active"><a href="#">Show All</a></li>
							<li role="presentation" class="dropdown">
								<a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-expanded="false">
									User Type <span class="caret"></span>
								</a>
								<ul class="dropdown-menu" role="menu">
									<li role="presentation"><a href="#">Faculty</a></li>
									<li role="presentation"><a href="#">Students</a></li>
								</ul>
							</li>
							<li role="presentation"><a href="#">Loan Type</a></li>
						</ul> -->
					</div>

					<div class="row">
						<!-- LOANER TABLE -->
						<div id="loan-table" class="table-responsive">
							<table class="table table-hover table-bordered text-center">
								<thead>
									<tr>
										<th>Name</th>
										<th>User Type</th>
										<th>Loan Info</th>
										<th>Time Loaned</th>
										<th>Options</th>
									</tr>
								</thead>
								<tbody>
									<tr data-loan-id="123">
										<td>John Doe</td>
										<td>Student</td>
										<td>
											<img class="img img-responsive" src="/assets/img/laptop.png" width="32" height="32">
											<img class="img img-responsive" src="/assets/img/mic.png" width="32" height="32">
											<img class="img img-responsive" src="/assets/img/vga-adapter.png" width="32" height="32">
											<img class="img img-responsive" src="/assets/img/webcam.png" width="32" height="32">					
										</td>
										<td>Today, 2:55pm</td>
										<td class="table-button-group"><button data-toggle="modal" data-target="#loan-info-modal" class="btn btn-md btn-info get-info">Info</button><button class="btn btn-md btn-primary check-in">Check In</button></td>
									</tr>
									<tr data-loan-id="123">
										<td>John Doe</td>
										<td>Student</td>
										<td>
											<img class="img img-responsive" src="/assets/img/laptop.png" width="32" height="32">
											<img class="img img-responsive" src="/assets/img/mic.png" width="32" height="32">
											<img class="img img-responsive" src="/assets/img/mic.png" width="32" height="32">
											<img class="img img-responsive" src="/assets/img/webcam.png" width="32" height="32">					
										</td>
										<td>Today, 2:55pm</td>
										<td class="table-button-group"><button data-toggle="modal" data-target="#loan-info-modal" class="btn btn-md btn-info get-info">Info</button><button class="btn btn-md btn-primary check-in">Check In</button></td>
									</tr>
									<tr>
										<td>John Doe</td>
										<td>Student</td>
										<td><img class="img img-responsive" src="/assets/img/laptop.png" width="32" height="32"></td></td>
										<td>Today, 2:55pm</td>
										<td class="table-button-group"><button data-toggle="modal" data-target="#loan-info-modal" class="btn btn-md btn-info get-info">Info</button><button class="btn btn-md btn-primary check-in">Check In</button></td>
									</tr>
									<tr>
										<td>Jane Doe</td>
										<td>Professor</td>
										<td><img class="img img-responsive" src="/assets/img/mic.png" width="32" height="32"></td>
										<td>Today, 9:47am</td>
										<td class="table-button-group"><button data-toggle="modal" data-target="#loan-info-modal" class="btn btn-md btn-info get-info">Info</button><button class="btn btn-md btn-primary check-in">Check In</button></td>
									</tr>
									<tr data-loan-id="123">
										<td>John Doe</td>
										<td>Student</td>
										<td>
											<img class="img img-responsive" src="/assets/img/laptop.png" width="32" height="32">
											<img class="img img-responsive" src="/assets/img/mic.png" width="32" height="32">
											<img class="img img-responsive" src="/assets/img/mic.png" width="32" height="32">
											<img class="img img-responsive" src="/assets/img/webcam.png" width="32" height="32">					
										</td>
										<td>Today, 2:55pm</td>
										<td class="table-button-group"><button data-toggle="modal" data-target="#loan-info-modal" class="btn btn-md btn-info get-info">Info</button><button class="btn btn-md btn-primary check-in">Check In</button></td>
									</tr>
									<tr>
										<td>John Doe</td>
										<td>Student</td>
										<td><img class="img img-responsive" src="/assets/img/laptop.png" width="32" height="32"></td></td>
										<td>Today, 2:55pm</td>
										<td class="table-button-group"><button class="btn btn-md btn-info">Info</button><button class="btn btn-md btn-primary">Check In</button></td>
									</tr>
									<tr>
										<td>Jane Doe</td>
										<td>Professor</td>
										<td><img class="img img-responsive" src="/assets/img/mic.png" width="32" height="32"></td>
										<td>Today, 9:47am</td>
										<td class="table-button-group"><button class="btn btn-md btn-info">Info</button><button class="btn btn-md btn-primary">Check In</button></td>
									</tr>															
								</tbody>
							</table>
						</div>
					</div>
					<!-- LOANER TABLE END -->
				</div>
				<!-- MAIN CONTENT END -->
			</div>
		</div>
		<!-- BODY END -->

<!-- MODAL: NEW LOAN -->
<div class="modal fade" id="loan-out-modal" tabindex="-1" role="dialog" aria-labelledby="loanOutModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="label">New Loaner Log Entry</h4>
      </div>
      <div class="modal-body">
      	<h3>Please enter the following information</h3>
      	<hr>
      	<!-- LOAN OUT FORM -->
      	<form>
      		<div class="form-group">
      			<label for="user-name">Name</label>
      			<div class="row">
        			<div class="col-md-8">
        				<input id="user-name" class="form-control" type="text" placeholder="Click and scan or enter a name." autocomplete="off">
        			</div>
        			<!-- TODO: Allow multiple inputs, add to array of items of loan, would add all under same loan ID number (multiple rows) -->
        			<div class="col-md-4">
        				<div class="feedback" id="user-name-feedback"></div>
        			</div>
        		</div>
     			</div>
     			<div class="form-group">
     				<label for="device-name">Device</label>
     				<div class="row">
     					<div class="col-md-8">
     						<input id="device-name" class="form-control" type="text" placeholder="Click and scan or enter device ID." autocomplete="off">
     					</div>
     					<div class="col-md-4">
        				<div class="feedback" id="device-name-feedback"></div>
     					</div>
     				</div>
     			</div>
     			<button id="toggle-adv-options" class="btn btn-md btn-warning">Toggle Advanced Options</button>
     			<div id="loan-out-adv-options">
     			<!-- TODO: Adv options: Who the loan is for, is it a long-term loan, etc. -->
     			<!-- TODO: Checkout for classroom, autofill professor/CLASS who is scheduled for that class. (Ie. Speakers) -->
     				<div class="form-group">
     					<label for="loan-for-user">Reserving For</label>
     					<div class="row">
	     					<div class="col-md-8">
	     						<input id="loan-for-user" class="form-control" type="text" placeholder="Enter a name (not the same one as above)." autocomplete="off">
	     					</div>
	     					<div class="col-md-4">
	     						<div class="feedback" id="loan-for-user-feedback"></div>
	     					</div>
     					</div>
     				</div>
     				<div class="form-group">
     					<label for="longterm-loan">Due Date <small>(If this is a long-term loan.)</small></label>
     					<div class="row">
	     					<div class="col-md-8">
	     						<input id="date-due-back" class="form-control pickadate" type="text" placeholder="Choose a date." autocomplete="off">
	     					</div>
	     					<div class="col-md-4">
	     						<div class="feedback" id="loan-for-user-feedback"></div>
	     					</div>
     					</div>
     				</div>     				
     			</div>

     			<!-- LOAN OUT FORM END -->
      	</form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary">Checkout</button>
      </div>
    </div>
  </div>
</div>
<!-- MODAL: NEW LOAN (END) -->

<!-- MODAL: LOAN CHECK IN -->
<div class="modal fade" id="loan-in-modal" tabindex="-1" role="dialog" aria-labelledby="loadInModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="label">Check In</h4>
      </div>
      <div class="modal-body">
      	<h3>Please enter the following information</h3>
      	<hr>
      	<!-- LOAN IN FORM -->
      	<form>
      		<div class="form-group">
      			<label for="user-name">Name</label>
      			<div class="row">
        			<div class="col-md-8">
        				<input id="user-name" class="form-control" type="text" placeholder="Click and scan or enter a name." autocomplete="off">
        			</div>
        			<!-- TODO: Allow multiple inputs, add to array of items of loan, would add all under same loan ID number (multiple rows) -->
        			<div class="col-md-4">
        				<div class="feedback" id="user-name-feedback"></div>
        			</div>
        		</div>
     		</div>
 			<div class="form-group">
 				<label for="device-name">Device</label>
 				<div class="row">
 					<div class="col-md-8">
 						<input id="device-name" class="form-control" type="text" placeholder="Click and scan or enter device ID." autocomplete="off">
 					</div>
 					<div class="col-md-4">
    				<div class="feedback" id="device-name-feedback"></div>
 					</div>
 				</div>
 			</div>
      	</form>
     	<!-- LOAN IN FORM END -->
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary">CheckIn</button>
      </div>
    </div>
  </div>
</div>
<!-- MODAL: LOAN CHECK IN (END) -->

<!-- MODAL: LOAN INFO -->
<div class="modal fade" id="loan-info-modal" tabindex="-1" role="dialog" aria-labelledby="loanInfoModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="modal-loan-info">Loan Info - ID <span class="loan-id"></span></h4>
      </div>
      <div class="modal-body">
      	Loan Info ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<!-- MODAL: LOAN INFO (END) -->

	</body>


	<script type="text/javascript">

		$( document ).ready(function() {

			$('th').addClass('lead').addClass('text-center');
			$('#loan-out-adv-options').toggle();
		});

		$('#tableView li').on('click', 'a', function() {

			$('#tableView li.active').removeClass('active');
			$(this).parent().addClass('active'); // Set the li to the active tab.
			$(this).blur();

			// updateLogView();
		})

		$('#toggle-adv-options').on('click', function() {

			$('#loan-out-adv-options').slideToggle('fast');

		});

		$('.pickadate').on('click', function() {
			$(this).pickadate({
				min: 1,
				disable: [
					1, 7
				]
			});
		});

		// SHOW LOAN INFO FROM LOG TABLE
		// $('.table-button-group').on('click', 'button.get-info', function() {

		// 	var loanId = $(this).parent().parent().attr('data-loan-id');

		// 	$('#loan-info-modal').modal('show');

		// 	// Open up modal with loanId and info.

		// });

		$('#loan-info-modal').on('show.bs.modal', function(event) {

			var button = $(event.relatedTarget);
			var loanMain = $(button).parent().parent();

			var loanId = $(loanMain).data('loan-id');

			$.ajax({
				url: "/testloandata.json",
				success: function(data) {
					console.log(data);
				}
			});
			// INSERT AJAX HERE FOR LOAN INFO (Pass in loanId)

			var modal = $(this);
			modal.find('.loan-id').text(loanId);

		});

		// CHECK LOAN IN FROM TABLE LOG
		$('.table-button-group').on('click', 'button.check-in', function() {

			var loanMain = $(this).parent().parent();
			var loanId = $(loanMain).attr('data-loan-id');

			// $(loanMain).fadeOut('slow');

			// Open up modal for that loanId and show check in option.
			// TODO: What will check in be when clicked for log item. (Ie. Main check-in will ask to scan item, auto checks in.)

		});

		// $('#tableViewOptions li').on('click', 'a', function() {

		// 	var tableOption = $(this).parent();

		// 	var hasActiveClass = $(tableOption).hasClass('active');

		// 	$(tableOption).toggleClass('active');

		// 	filterTableView(tableOption, hasActiveClass);

		// });

		function filterTableView(tableOption, isActive) {

			// Update live table view.
		}

		// $('#loanOutModal').modal();

	</script>

</html>